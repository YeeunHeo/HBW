<!doctype html>
<html lang="ko">

<head>
	<meta charset="utf-8">
	{% load staticfiles %}
	<link rel="shortcut icon" href="{% static "images/upper-logo.png" %}">
	<link rel="stylesheet" href="{% static "css/style.css" %}">
	<link rel="stylesheet" href="{% static "css/style-place.css" %}" type="text/css">
	<title>소프트웨어학부 복지사업</title>

	<script>
		//2개만 체크되게 하기

		function count_ck(obj) {

			var chkbox = document.getElementsByName("time");

			var chkCnt = 0;

			for (var i = 0; i < chkbox.length; i++) {

				if (chkbox[i].checked) {

					chkCnt++;

				}

			}

			if (chkCnt > 4) {

				alert("최대 2시간까지 예약 가능합니다.");

				obj.checked = false;

				return false;

			}

		}
	</script>
</head>

<body>
	<div class="container">
		<div class="header">
			<div class="logo">
				<img for="logo" src="{% static "images/header_logo.png" %}" alt="" usemap="#main_logo">
				<map name="main_logo">
					<area shape="rect" coords="5,5,250,80" href="{% url "login:main" %}" alt="메인메뉴로 가기">
				</map>
			</div>
            {% if user.is_authenticated %}
            <div class="login_button">
                    <a href="/login/logout"><img for ="logout_button" src="{% static "images/logout.png" %}" alt=""></a>
            </div>
            {% else %}
            <div class="login_button">
                <a href="/login/login">
                    <img for ="login_button" src="{% static "images/login.png" %}" alt=""></a>
            </div>
            {% endif %}

		</div>
		<div class="section">
			<div class="menu_bar">
				<ul>
					<li><a href="{% url "login:main" %}">홈</a></li>
					<li><a href="place_reservation.html">실습실 예약</a></li>
					<li><a href="{% url "login:mypage" %}">마이페이지</a></li>
				</ul>
				<!-- <hr width="85%" color="black" 0.5px> -->
				<!-- <div class ="menu_bar_line">
							<img for="menu_bar" src="images/menu_bar.png" alt="">
							</div> -->
			</div>
			<div class="place_section">
				<div class="left_click">
					<div class="place">
						<div id="font">
							<h3>실습실 자리 배치도</h3>
						</div>
						<hr width="95%" color="black">
						<div class="place_image">
							<img for="place" src="{% static "images/place.png" %}" alt="">
						</div>
					</div>
					<div class="link_mypage">
						<h3>실습실 예약 취소는 <a href="mypage.html">마이페이지</a>에서 가능합니다.</h3>
					</div>
				</div>
				<div class="right_click">
					<form action="/login/reservation/" method="post">{% csrf_token %}
						<div class="place_click">
							<div id="font">
								<h3>자리 선택</h3>
							</div>
							<hr width="95%" color="black">
							<div id="table_div" class="reservation">
								<div class="upper">
									<p>
										<pre>
											<form id="table_sel" action="/login/reservation/" method="post">{% csrf_token %}
												{{ form.selected_table.label_tag }}
												{{ form.selected_table }}
												{{ form.selected_table.errors }}
												<div class="btn_time">
														<p>
															<pre>
																<input type="submit" value="예약 가능시간 확인">												
															</pre>
														</p>
													</div>
												</div>
											</form>																					<!--
											input type="radio" id="desk1" value="1" name="desk"><label for="desk1"></label> 1     <input type="radio" id="desk2" value="2" name="desk"><label for="desk2"></label> 2     <input type="radio" id="desk3" value="3" name="desk"><label for="desk3"></label> 3     <input type="radio" id="desk4" value="4" name="desk"><label for="desk4"></label> 4     <input type="radio" id="desk5" value="5" name="desk"><label for="desk5"></label> 5

											<input type="radio" id="desk6" value="6" name="desk"><label for="desk6"></label> 6     <input type="radio" id="desk7" value="7" name="desk"><label for="desk7"></label> 7     <input type="radio" id="desk8" value="8" name="desk"><label for="desk8"></label> 8     <input type="radio" id="desk9" value="9" name="desk"><label for="desk9"></label> 9     <input type="radio" id="desk10" value="10" name="desk"><label for="desk10"></label> 10 
											-->
										</pre>
									</p>
								</div>
								<div class="btn_time">
									<p>
										<pre>
											<input type="submit" value="예약 가능시간 확인">												
										</pre>
									</p>
								</div>
							</div>
						</div>
					</form>	
					<div class="lower">
						<div id="font">
							<h3>예약 시간 선택</h3>
						</div>
						<hr width="95%" color="black">
						<div class="check_time">
							<p>
								<pre>
									<form action="/login/sel/" method="POST" onsubmit="_submit(this);">{% csrf_token %}
										{% if tables %}
											{% for table in tables %}
												{% if table.is_borrowed == 0 %}
													<input type="checkbox" id={{ table.number }} value={{ table.start_time }} name="time[]" onClick="count_ck(this)"><label for=table.start_time></label>
													<input type="hidden" name="number[]" value={{ table.number }} />
												{% else %}
													<input type="checkbox" disabled id={{ table.number }} value={{ table.start_time }} name="time[]" onClick="count_ck(this)"><label for=table.start_time></label>
													<input type="hidden" name="number[]" value={{ table.number }} />
												{% endif %}
											{% endfor %}

										{% else %}
											<p>좌석을 선택해 주세요</p>
										{% endif %}

										<div class="btn_reservation">
											<p>
												<pre>
													<input type="submit" id="button" value="예약하기">
												</pre>
											</p>
										</div>
									</form>
					</div>
				</div>
			</div>
</body>

<script language='JavaScript'>
    function _submit(f)
    {
        //같이 보낼 값 정리
        if (typeof(f.elements['time[]'].length) == 'undefined') //단일
        {
            if (f.elements['time[]'].checked==false)
            {
                f.elements['number[]'].disabled=true;
            }
        } else { //다중
            for (i=0; i<f.elements['time[]'].length; i++)
            {
                if (f.elements['time[]'][i].checked==false)
                {
                    f.elements['number[]'][i].disabled=true;
                }
            }
        }
        return true;
    }
	</script>
	
	<script language="JavaScript">
		function showInput() {
			document.getElementById('display').innerHTML = 
						document.getElementById("user_input").value;
		}
	  </script>
	</html>

	
